<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒÙˆÙƒÙŠØ² Ù…ÙŠÙ…Ø§ | MADE WITH LOVE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --main-pink: #d63384; 
            --soft-pink: #f8d7da; 
            --main-brown: #795548; 
            --card-bg: #ffffff; 
        }

        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            margin: 0; 
            background-color: var(--soft-pink); 
            padding-bottom: 180px; 
            -webkit-tap-highlight-color: transparent;
        }

        header { background-color: var(--soft-pink); background-image: url('logo.jpg'); background-size: contain; background-position: center top; background-repeat: no-repeat; width: 100%; height: 260px; border-bottom: 3px solid var(--main-pink); }
        
        .marquee-container { background-color: var(--main-pink); color: white; overflow: hidden; padding: 12px 0; font-size: 14px; font-weight: bold; position: sticky; top: 0; z-index: 1001; text-align: center; }
        .marquee-text { display: inline-block; white-space: nowrap; animation: bounce-slide 10s ease-in-out infinite; }
        @keyframes bounce-slide { 0%, 100% { transform: translateX(-5%); } 50% { transform: translateX(5%); } }

        .instagram-float { position: fixed; top: 70px; left: 20px; background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; z-index: 2001; box-shadow: 0 4px 10px rgba(0,0,0,0.2); text-decoration: none; }
        .whatsapp-float { position: fixed; top: 130px; left: 20px; background-color: #25d366; color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 26px; z-index: 2001; box-shadow: 0 4px 10px rgba(0,0,0,0.2); text-decoration: none; }

        .categories-nav { position: sticky; top: 43px; background: #fff; padding: 12px; display: flex; gap: 10px; overflow-x: auto; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .cat-btn { border: 2px solid var(--main-pink); background: transparent; color: var(--main-pink); padding: 8px 20px; border-radius: 25px; white-space: nowrap; font-weight: bold; cursor: pointer; }
        .cat-btn.active { background: var(--main-pink); color: #fff; }
        
        .section-title { background: var(--main-brown); color: white; padding: 8px 20px; margin: 25px 15px 10px; border-radius: 8px; display: inline-block; font-size: 15px; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        
        .product-card { background: var(--card-bg); border-radius: 20px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); display: flex; flex-direction: column; border: 1px solid #fce4ec; }
        .image-container { width: 100%; height: 150px; overflow: hidden; position: relative; background: #f9f9f9; cursor: pointer; }
        .image-container img { width: 100%; height: 100%; object-fit: cover; position: absolute; opacity:0; transition: opacity 0.5s ease; }
        .image-container img.active { opacity: 1; }
        
        .product-info { padding: 10px; text-align: center; cursor: pointer; }
        .product-info h3 { margin: 0 0 5px 0; font-size: 13px; color: var(--main-brown); font-weight: bold; }
        .product-desc { font-size: 10px; color: #d63384; margin-bottom: 5px; font-weight: bold; line-height: 1.3; }
        .price-text { color: var(--main-pink); font-weight: 800; font-size: 14px; display: block; margin-bottom: 5px; }

        .extras-container { background: #fff9fa; padding: 5px; border-top: 1px dashed #ffd1dc; }
        .extra-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; padding: 0 4px; }
        .extra-name { font-size: 9px; color: #666; font-weight: bold; flex: 1; text-align: center; }
        .extra-ctrl { display: flex; align-items: center; gap: 4px; }
        .btn-extra { background: #fff; border: 1px solid var(--main-pink); color: var(--main-pink); width: 22px; height: 22px; border-radius: 5px; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .extra-qty { font-size: 11px; min-width: 10px; text-align: center; font-weight: bold; }
        .note-box { width: 90%; margin: 5px auto; padding: 6px; border: 1px solid #ddd; border-radius: 6px; font-size: 10px; box-sizing: border-box; display: block; text-align: center; }

        .main-controls { display: flex; align-items: center; justify-content: space-around; padding: 10px; background: #fafafa; border-top: 1px solid #eee; margin-top: auto; }
        .btn-main { background: var(--main-pink); color: white; border: none; width: 32px; height: 32px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 18px; }
        .main-qty { font-weight: bold; color: var(--main-brown); font-size: 16px; }

        #productPage { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 3000; overflow-y: auto; padding-bottom: 220px; }
        .back-nav { padding: 15px; background: white; position: sticky; top: 0; display: flex; align-items: center; gap: 10px; z-index: 10; border-bottom: 1px solid #eee; }
        .btn-back { background: var(--soft-pink); border: none; padding: 10px 15px; border-radius: 12px; color: var(--main-pink); font-weight: bold; cursor: pointer; }
        .page-slider { width: 100%; height: 350px; position: relative; background: #000; overflow: hidden; }
        .page-slider img { width: 100%; height: 100%; object-fit: contain; position: absolute; opacity: 0; transition: 0.5s; }
        .page-slider img.active { opacity: 1; }
        .slider-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.3); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 20px; z-index: 5; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .arrow-left { left: 10px; } .arrow-right { right: 10px; }
        .slider-nav { position: absolute; bottom: 15px; width: 100%; display: flex; justify-content: center; gap: 5px; }
        .dot { width: 8px; height: 8px; background: rgba(255,255,255,0.5); border-radius: 50%; }
        .dot.active { background: white; width: 20px; border-radius: 10px; }

        .details-section { padding: 20px; text-align: center; }
        .page-extras { background: #fffcfd; border-radius: 15px; padding: 15px; border: 1px solid #fce4ec; margin: 20px; text-align: right; }
        .page-extra-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #f9e2e7; }
        .page-action-container { padding: 0 20px; margin-bottom: 50px; }
        .btn-add-product { background: var(--main-brown); color: white; padding: 18px 25px; border-radius: 15px; display: flex; justify-content: space-between; align-items: center; width: 100%; border: none; font-size: 16px; font-family: inherit; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        .cart-fixed-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--main-pink); color: white; padding: 20px 0; display: none; justify-content: center; align-items: center; z-index: 4000; box-shadow: 0 -4px 15px rgba(0,0,0,0.1); border-radius: 25px 25px 0 0; cursor: pointer; }
        .cart-content-wrapper { display: flex; justify-content: space-between; width: 85%; max-width: 500px; font-weight: bold; font-size: 16px; }

        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 5000; overflow-y: auto; }
        .modal-body { background: white; width: 90%; max-width: 450px; margin: 40px auto; border-radius: 20px; padding: 20px; direction: rtl; }
        .cart-item-row { display: flex; flex-direction: column; border-bottom: 1px dashed #ddd; padding: 12px 0; }
        .cart-item-header { display: flex; justify-content: space-between; align-items: center; }
        .cart-item-ctrl { display: flex; align-items: center; gap: 10px; }
        .btn-cart-qty { background: #f8d7da; border: 1px solid var(--main-pink); color: var(--main-pink); width: 30px; height: 30px; border-radius: 50%; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div id="mainView">
        <div class="marquee-container">
            <div class="marquee-text">ğŸ“¢ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø·Ù„Ø¨: Ø§Ù„Ø·Ù„Ø¨ Ù‚Ø¨Ù„ Ø¨ÙŠÙˆÙ… Ø§Ùˆ ÙŠÙˆÙ…ÙŠÙ† - Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø© Ø¨Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ… ğŸ“¢</div>
        </div>
        <a href="https://www.instagram.com/cookies_mema70/" class="instagram-float" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://wa.me/966502509910" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <header></header>
        <nav class="categories-nav">
            <button class="cat-btn active" onclick="filterMenu('all', this)">Ø§Ù„ÙƒÙ„</button>
            <button class="cat-btn" onclick="filterMenu('cookies', this)">ÙƒÙˆÙƒÙŠØ²</button>
            <button class="cat-btn" onclick="filterMenu('pudding', this)">Ø¨ÙˆØ¯ÙŠÙ†Ù‚</button>
            <button class="cat-btn" onclick="filterMenu('cakes', this)">ÙƒÙŠÙƒØ§Øª</button>
            <button class="cat-btn" onclick="filterMenu('boxes', this)">Ø¨ÙˆÙƒØ³Ø§Øª</button>
        </nav>
        <div id="menuContent"></div>
        <div style="text-align: center; padding: 30px 0; color: var(--main-brown); font-weight: bold;">ÙŠÙØµÙ†Ø¹ Ø¨ÙƒÙ„ Ø­ÙØ¨ | MADE WITH LOVEğŸ’•</div>
    </div>

    <div id="productPage">
        <div class="back-nav">
            <button class="btn-back" onclick="closeProductPage()"><i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±</button>
            <span id="pageHeaderTitle" style="font-weight:bold; color:var(--main-brown)"></span>
        </div>
        <div id="pageContent"></div>
    </div>

    <div id="cartBar" class="cart-fixed-bar" onclick="openReview()">
        <div class="cart-content-wrapper">
            <span>ğŸ›’ Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨ (<span id="itemsCount">0</span>)</span>
            <span id="totalPrice">0 Ø±ÙŠØ§Ù„</span>
        </div>
    </div>

    <div id="reviewModal" class="modal-overlay">
        <div class="modal-body">
            <h3 style="text-align:center; color:var(--main-pink)">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³Ù„ØªÙƒ</h3>
            <div id="reviewItems"></div>
            <div style="text-align:center; font-weight:bold; margin-top:15px; font-size:18px;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="modalTotal">0</span> Ø±ÙŠØ§Ù„</div>
            <button onclick="sendWhatsApp()" style="background: #25d366; color: white; border: none; width: 100%; padding: 15px; border-radius: 12px; font-weight: bold; margin-top: 15px; cursor: pointer;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨ âœ…</button>
            <button onclick="closeReview()" style="background: #eee; width: 100%; padding: 10px; border: none; border-radius: 12px; margin-top: 10px; cursor: pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        const products = [
            { id: "c1", name: "ÙƒÙˆÙƒÙŠØ² Ù…ÙŠÙ…Ø§", cat: "cookies", price: 5, desc: "(Ø·Ø±Ø§ÙˆØ© ÙˆÙ„Ø°Ø© - Ø¨Ø´ÙˆÙƒÙ„Øª Ø¨Ù„Ø¬ÙŠÙƒÙŠ ÙØ§Ø®Ø±)", imgs: ["3.jpg", "51.jpg", "52.jpg", "53.jpg"] },
            { id: "c2", name: "Ø¨Ø§ÙŠØªØ³ ÙƒÙˆÙƒÙŠØ²", cat: "cookies", price: 1, desc: "(ØµØºÙŠØ±Ø© Ø¨Ø§Ù„Ø­Ø¬Ù… - ÙƒØ¨ÙŠØ±Ù‡ Ø¨Ø§Ù„Ø·Ø¹Ù… ØªØ°ÙˆØ¨ ÙˆØªØ®Ù„ÙŠÙƒ ØªØ¨ØªØ³Ù…)", imgs: ["8.jpg", "56.jpg", "57.jpg", "58.jpg", "59.jpg", "60.jpg"], extras: [{ name: "ØµÙˆØµ Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 2 }, { name: "ØµÙˆØµ ÙØ³ØªÙ‚", price: 2 }, { name: "ØµÙˆØµ ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "ØµÙˆØµ Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }] },
            { id: "c3", name: "ÙƒÙˆÙƒÙŠØ² Ø­Ø³Ø§ÙˆÙŠ", cat: "cookies", price: 6, desc: "(Ù†ÙƒÙ‡Ø© ØªØ±Ø§Ø«ÙŠØ© - Ø¨Ù„Ù…Ø³Ø© Ø¹ØµØ±ÙŠØ©)", imgs: ["9.jpg", "40.jpg", "41.jpg", "42.jpg", "43.jpg", "44.jpg"] },
            { id: "c4", name: "Ø³ÙƒÙˆØ¨ ÙƒÙˆÙƒÙŠØ²", cat: "cookies", price: 23, desc: "(Ø³ÙƒÙˆØ¨ ÙƒÙˆÙƒÙŠØ² Ù…Ø¹ Ø§Ù„ÙÙŠÙˆØªÙ† ÙˆØ§Ù„Ù‚Ø±Ù…Ø´Ù‡ ÙˆØ§Ù„Ø´ÙˆÙƒÙ„Ø§ØªØ© .. ØªØ¬Ø±Ø¨Ø© Ù„Ø°ÙŠØ°Ø© Ù…Ø§ ØªÙÙ†Ø³Ù‰!)", imgs: ["22.jpg", "73.jpg"], extras: [{name:"Ø²ÙŠØ§Ø¯Ø© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price:2}, {name:"Ø²ÙŠØ§Ø¯Ø© ÙÙŠÙˆØªÙŠÙ†", price:2}] },
            { id: "c5", name: "Ø³ÙƒÙˆØ¨ ÙƒÙˆÙƒÙŠØ² Ù…ÙŠÙ…Ø§ ÙˆØ³Ø·", cat: "cookies", price: 33, desc: "(Ø³ÙƒÙˆØ¨ ÙƒÙˆÙƒÙŠØ² Ù…Ø¹ Ø§Ù„ÙÙŠÙˆØªÙ† ÙˆØ§Ù„Ù‚Ø±Ù…Ø´Ù‡ ÙˆØ§Ù„Ø´ÙˆÙƒÙ„Ø§ØªØ© .. ØªØ¬Ø±Ø¨Ø© Ù„Ø°ÙŠØ°Ø© Ù…Ø§ ØªÙÙ†Ø³Ù‰!)", imgs: ["73.jpg"], extras: [{name:"Ø²ÙŠØ§Ø¯Ø© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price:2}, {name:"Ø²ÙŠØ§Ø¯Ø© ÙÙŠÙˆØªÙŠÙ†", price:2}] },
            { id: "p1", name: "Ø¨ÙˆØ¯ÙŠÙ†Ù‚ Ù…ÙŠÙ…Ø§ Ù…ÙŠÙ†ÙŠ", cat: "pudding", price: 10, desc: "(Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„ÙƒÙˆÙƒÙŠØ² ÙˆØ§Ù„ÙÙŠÙˆØªÙ† Ø§Ù„Ù…Ù‚Ø±Ù…Ø´ ÙˆØ§Ù„Ø´ÙˆÙƒÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠØ© Ø§Ù„ÙØ§Ø®Ø±Ø©)", imgs: ["5.jpg", "72.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }, { name: "Ù…Ø§Ø±Ø´Ù…ÙŠÙ„Ùˆ", price: 2 }] },
            { id: "p2", name: "Ø¨ÙˆØ¯ÙŠÙ†Ù‚ Ù…ÙŠÙ…Ø§ ÙˆØ³Ø·", cat: "pudding", price: 20, desc: "(Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„ÙƒÙˆÙƒÙŠØ² ÙˆØ§Ù„ÙÙŠÙˆØªÙ† Ø§Ù„Ù…Ù‚Ø±Ù…Ø´ ÙˆØ§Ù„Ø´ÙˆÙƒÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠØ© Ø§Ù„ÙØ§Ø®Ø±Ø©)", imgs: ["4.jpg", "70.jpg", "71.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }, { name: "Ù…Ø§Ø±Ø´Ù…ÙŠÙ„Ùˆ", price: 2 }] },
            { id: "p3", name: "Ø¨ÙˆØ¯ÙŠÙ†Ù‚ Ù…ÙŠÙ…Ø§ ÙƒØ¨ÙŠØ±", cat: "pudding", price: 30, desc: "(Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„ÙƒÙˆÙƒÙŠØ² ÙˆØ§Ù„ÙÙŠÙˆØªÙ† Ø§Ù„Ù…Ù‚Ø±Ù…Ø´ ÙˆØ§Ù„Ø´ÙˆÙƒÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠØ© Ø§Ù„ÙØ§Ø®Ø±Ø©)", imgs: ["6.jpg", "66.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }, { name: "Ù…Ø§Ø±Ø´Ù…ÙŠÙ„Ùˆ", price: 2 }] },
            { id: "p4", name: "Ø¨ÙˆØ¯ÙŠÙ†Ù‚ Ù…ÙƒØ³ Ù…ÙŠÙ†ÙŠ", cat: "pudding", price: 11, desc: "(Ù…ÙƒØ³ Ø§Ù„ÙƒÙŠÙƒ ÙˆØ§Ù„ÙƒÙˆÙƒÙŠØ² !! Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„ÙƒÙˆÙƒÙŠØ² ÙˆØ§Ù„ÙƒÙŠÙƒ ÙˆØ§Ù„ÙÙŠÙˆØªÙ† Ø§Ù„Ù…Ù‚Ø±Ù…Ø´ ÙˆØ§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠØ© Ø§Ù„ÙØ§Ø®Ø±Ø©)", imgs: ["13.jpg", "45.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }, { name: "Ù…Ø§Ø±Ø´Ù…ÙŠÙ„Ùˆ", price: 2 }] },
            { id: "p5", name: "Ø¨ÙˆØ¯ÙŠÙ†Ù‚ Ù…ÙƒØ³ ØµØºÙŠØ±", cat: "pudding", price: 19, desc: "(Ù…ÙƒØ³ Ø§Ù„ÙƒÙŠÙƒ ÙˆØ§Ù„ÙƒÙˆÙƒÙŠØ² !! Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„ÙƒÙˆÙƒÙŠØ² ÙˆØ§Ù„ÙƒÙŠÙƒ ÙˆØ§Ù„ÙÙŠÙˆØªÙ† Ø§Ù„Ù…Ù‚Ø±Ù…Ø´ ÙˆØ§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠØ© Ø§Ù„ÙØ§Ø®Ø±Ø©)", imgs: ["21.jpg", "48.jpg", "49.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }, { name: "Ù…Ø§Ø±Ø´Ù…ÙŠÙ„Ùˆ", price: 2 }] },
            { id: "p6", name: "Ø¨ÙˆØ¯ÙŠÙ†Ù‚ Ù…ÙƒØ³ ÙˆØ³Ø·", cat: "pudding", price: 21, desc: "(Ù…ÙƒØ³ Ø§Ù„ÙƒÙŠÙƒ ÙˆØ§Ù„ÙƒÙˆÙƒÙŠØ² !! Ø·Ø¨Ù‚Ø§Øª Ù…Ù† Ø§Ù„ÙƒÙˆÙƒÙŠØ² ÙˆØ§Ù„ÙƒÙŠÙƒ ÙˆØ§Ù„ÙÙŠÙˆØªÙ† Ø§Ù„Ù…Ù‚Ø±Ù…Ø´ ÙˆØ§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠØ© Ø§Ù„ÙØ§Ø®Ø±Ø©)", imgs: ["12.jpg", "46.jpg", "47.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 2 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 2 }, { name: "Ù…Ø§Ø±Ø´Ù…ÙŠÙ„Ùˆ", price: 2 }] },
            { id: "k1", name: "ÙƒÙŠÙƒØ© 5 Ø§Ù†Ø´ (Ø¯Ø§Ø¦Ø±ÙŠØ©)", cat: "cakes", price: 40, desc: "(ÙƒÙŠÙƒØ§Øª Ù…Ø­Ø´ÙŠÙ‡ ÙˆÙ…ØºØ·Ø§Ø© Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠ - Ù…ØªØ¹Ø© Ù„ÙƒÙ„ Ù„Ù‚Ù…Ø©)", imgs: ["7.jpg", "19.jpg", "23.jpg", "24.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 4 }, { name: "ÙƒØªØ§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙŠÙƒ", price: 5, hasNote: true }, { name: "Ø´Ù…Ø¹Ø©", price: 1 }] },
            { id: "k2", name: "ÙƒÙŠÙƒØ© 8 Ø§Ù†Ø´ (Ø¯Ø§Ø¦Ø±ÙŠØ©)", cat: "cakes", price: 85, desc: "(ÙƒÙŠÙƒØ§Øª Ù…Ø­Ø´ÙŠÙ‡ ÙˆÙ…ØºØ·Ø§Ø© Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠ - Ù…ØªØ¹Ø© Ù„ÙƒÙ„ Ù„Ù‚Ù…Ø©)", imgs: ["1.jpg", "15.jpg", "61.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 4 }, { name: "ÙƒØªØ§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙŠÙƒ", price: 5, hasNote: true }, { name: "Ø´Ù…Ø¹Ø©", price: 1 }] },
            { id: "k3", name: "ÙƒÙŠÙƒØ© 5 Ø§Ù†Ø´ (Ù‚Ù„Ø¨)", cat: "cakes", price: 45, desc: "(ÙƒÙŠÙƒØ§Øª Ù…Ø­Ø´ÙŠÙ‡ ÙˆÙ…ØºØ·Ø§Ø© Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠ - Ù…ØªØ¹Ø© Ù„ÙƒÙ„ Ù„Ù‚Ù…Ø©)", imgs: ["10.jpg", "29.jpg", "30.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 4 }, { name: "ÙƒØªØ§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙŠÙƒ", price: 5, hasNote: true }, { name: "Ø´Ù…Ø¹Ø©", price: 1 }] },
            { id: "k4", name: "ÙƒÙŠÙƒØ© 10 Ø§Ù†Ø´ (Ù‚Ù„Ø¨)", cat: "cakes", price: 120, desc: "(ÙƒÙŠÙƒØ§Øª Ù…Ø­Ø´ÙŠÙ‡ ÙˆÙ…ØºØ·Ø§Ø© Ø¨Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªÙ‡ Ø§Ù„Ø¨Ù„Ø¬ÙŠÙƒÙŠ - Ù…ØªØ¹Ø© Ù„ÙƒÙ„ Ù„Ù‚Ù…Ø©)", imgs: ["2.jpg", "67.jpg"], extras: [{ name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨Ù„Ø¬ÙŠÙƒÙŠØ©", price: 0 }, { name: "Ø§Ø¶Ø§ÙØ© ÙØ³ØªÙ‚", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© ÙƒÙŠÙ†Ø¯Ø±", price: 4 }, { name: "Ø§Ø¶Ø§ÙØ© Ø´ÙˆÙƒÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", price: 4 }, { name: "ÙƒØªØ§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙŠÙƒ", price: 5, hasNote: true }, { name: "Ø´Ù…Ø¹Ø©", price: 1 }] },
            { id: "b1", name: "Ø¨ÙˆÙƒØ³ Ø¯ÙˆÙ†Ø§Øª ÙƒÙˆÙƒÙŠØ² (6 Ø­Ø¨Ø§Øª)", cat: "boxes", price: 38, desc: "(ÙƒÙˆÙƒÙŠØ² Ø¨Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø¯ÙˆÙ†Ø§Øª - Ù„Ø°Ø© Ù…Ø²Ø¯ÙˆØ¬Ø©)", imgs: ["11.jpg", "18.jpg"] },
            { id: "b2", name: "Ø¨ÙˆÙƒØ³ Ø¯ÙˆÙ†Ø§Øª ÙƒÙˆÙƒÙŠØ² (12 Ø­Ø¨Ø©)", cat: "boxes", price: 76, desc: "(ÙƒÙˆÙƒÙŠØ² Ø¨Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø¯ÙˆÙ†Ø§Øª - Ù„Ø°Ø© Ù…Ø²Ø¯ÙˆØ¬Ø©)", imgs: ["18.jpg", "55.jpg"] },
            { id: "b1-diy", name: "Ø¨ÙˆÙƒØ³ Ø¯ÙˆÙ†Ø§Øª Ø§ØµÙ†Ø¹Ù‡Ø§ Ø¨Ù†ÙØ³Ùƒ (6 Ø­Ø¨Ø§Øª)", cat: "boxes", price: 38, desc: "(ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø¨ÙŠØ¯Ùƒ ÙˆØ§Ù„Ø§Ø¨Ø¯Ø§Ø¹ Ø¹Ù„ÙŠÙƒ)", imgs: ["11.jpg", "54.jpg"], extras: [{ name: "Ø²ÙŠØ§Ø¯Ø© ÙØ³ØªÙ‚", price: 4 }, { name: "Ø²ÙŠØ§Ø¯Ø© ÙƒÙŠÙ†Ø¯Ø±", price: 4 }, { name: "Ø²ÙŠØ§Ø¯Ø© Ø³Ø¨Ø±Ù†ÙƒÙ„Ø²", price: 1 }, { name: "Ø²ÙŠØ§Ø¯Ø© Ø¯ÙˆÙ†Ø§Øª ÙƒÙˆÙƒÙŠØ²", price: 5 }] },
            { id: "b2-diy", name: "Ø¨ÙˆÙƒØ³ Ø¯ÙˆÙ†Ø§Øª Ø§ØµÙ†Ø¹Ù‡Ø§ Ø¨Ù†ÙØ³Ùƒ (12 Ø­Ø¨Ø©)", cat: "boxes", price: 76, desc: "(ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø¨ÙŠØ¯Ùƒ ÙˆØ§Ù„Ø§Ø¨Ø¯Ø§Ø¹ Ø¹Ù„ÙŠÙƒ)", imgs: ["18.jpg", "55.jpg"], extras: [{ name: "Ø²ÙŠØ§Ø¯Ø© ÙØ³ØªÙ‚", price: 4 }, { name: "Ø²ÙŠØ§Ø¯Ø© ÙƒÙŠÙ†Ø¯Ø±", price: 4 }, { name: "Ø²ÙŠØ§Ø¯Ø© Ø³Ø¨Ø±Ù†ÙƒÙ„Ø²", price: 1 }, { name: "Ø²ÙŠØ§Ø¯Ø© Ø¯ÙˆÙ†Ø§Øª ÙƒÙˆÙƒÙŠØ²", price: 5 }] },
            { id: "b3", name: "Ø¨ÙˆÙƒØ³ Ø§Ù„Ù…Ø±Ø­ (5 Ø­Ø¨Ø§Øª)", cat: "boxes", price: 55, desc: "(ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø¨ÙŠØ¯Ùƒ ÙˆØ§Ù„Ø§Ø¨Ø¯Ø§Ø¹ Ø¹Ù„ÙŠÙƒ)", imgs: ["20.jpg"], extras: [{name:"Ø²ÙŠØ§Ø¯Ø© ÙƒØ±ÙŠÙ…Ø©", price:5}, {name:"Ø²ÙŠØ§Ø¯Ø© ÙƒÙˆÙƒÙŠØ²", price:6}, {name:"Ø²ÙŠØ§Ø¯Ø© Ø³Ø¨Ø±Ù†ÙƒÙ„Ø²", price:1}] },
            { id: "b4", name: "Ø¨ÙˆÙƒØ³ Ø§Ù„Ù…Ø±Ø­ (8 Ø­Ø¨Ø§Øª)", cat: "boxes", price: 88, desc: "(ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø¨ÙŠØ¯Ùƒ ÙˆØ§Ù„Ø§Ø¨Ø¯Ø§Ø¹ Ø¹Ù„ÙŠÙƒ)", imgs: ["20.jpg"], extras: [{name:"Ø²ÙŠØ§Ø¯Ø© ÙƒØ±ÙŠÙ…Ø©", price:5}, {name:"Ø²ÙŠØ§Ø¯Ø© ÙƒÙˆÙƒÙŠØ²", price:6}, {name:"Ø²ÙŠØ§Ø¯Ø© Ø³Ø¨Ø±Ù†ÙƒÙ„Ø²", price:1}] }
        ];

        let cart = {};

        function renderMenu(items) {
            const container = document.getElementById('menuContent');
            container.innerHTML = "";
            const cats = { cookies: "Ø§Ù„ÙƒÙˆÙƒÙŠØ²", pudding: "Ø§Ù„Ø¨ÙˆØ¯ÙŠÙ†Ù‚", cakes: "Ø§Ù„ÙƒÙŠÙƒØ§Øª", boxes: "Ø§Ù„Ø¨ÙˆÙƒØ³Ø§Øª" };
            for (let key in cats) {
                const filtered = items.filter(i => i.cat === key);
                if (filtered.length > 0) {
                    container.innerHTML += `<div class="section-title">${cats[key]}</div>`;
                    let grid = '<div class="menu-grid">';
                    filtered.forEach(item => {
                        let imgsHtml = item.imgs.map((img, idx) => `<img src="${img}" class="${idx===0?'active':''}">`).join('');
                        let extrasHtml = '';
                        if (item.extras) {
                            extrasHtml = `<div class="extras-container">`;
                            item.extras.forEach(ex => {
                                const exId = `ex_${item.id}_${ex.name.replace(/\s/g, '')}`;
                                extrasHtml += `
                                <div class="extra-item">
                                    <span class="extra-name">${ex.name} (+${ex.price})</span>
                                    <div class="extra-ctrl">
                                        <button class="btn-extra" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, 1, '${item.id}')">+</button>
                                        <span class="extra-qty" id="mq-${exId}">${cart[exId]?.qty || 0}</span>
                                        <button class="btn-extra" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, -1, '${item.id}')">-</button>
                                    </div>
                                </div>`;
                                if(ex.hasNote) extrasHtml += `<input type="text" id="note-${exId}" class="note-box" style="display:${(cart[exId]?.qty > 0) ? 'block' : 'none'}" oninput="updateNote('${exId}', this.value)" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..." value="${cart[exId]?.note || ''}">`;
                            });
                            extrasHtml += `</div>`;
                        }
                        grid += `
                        <div class="product-card">
                            <div class="image-container" onclick="openProductPage('${item.id}')">${imgsHtml}</div>
                            <div class="product-info" onclick="openProductPage('${item.id}')">
                                <h3>${item.name}</h3>
                                <div class="product-desc">${item.desc}</div>
                                <span class="price-text">${item.price} Ø±ÙŠØ§Ù„</span>
                            </div>
                            ${extrasHtml}
                            <div class="main-controls">
                                <button class="btn-main" onclick="changeQty('${item.id}', '${item.name}', ${item.price}, 1)">+</button>
                                <span class="main-qty" id="mq-${item.id}">${cart[item.id]?.qty || 0}</span>
                                <button class="btn-main" onclick="changeQty('${item.id}', '${item.name}', ${item.price}, -1)">-</button>
                            </div>
                        </div>`;
                    });
                    container.innerHTML += grid + '</div>';
                }
            }
            startSliders();
        }

        function openProductPage(productId) {
            const item = products.find(p => p.id === productId);
            document.getElementById('pageHeaderTitle').innerText = item.name;
            let imgsHtml = item.imgs.map((img, idx) => `<img src="${img}" class="${idx===0?'active':''}" id="pimg-${idx}">`).join('');
            let dotsHtml = item.imgs.map((_, idx) => `<div class="dot ${idx===0?'active':''}" id="pdot-${idx}"></div>`).join('');
            
            let extrasHtml = '';
            if (item.extras) {
                extrasHtml = `<div class="page-extras"><h3 style="font-size:14px; color:var(--main-brown); margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:5px;">Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</h3>`;
                item.extras.forEach(ex => {
                    const exId = `ex_${item.id}_${ex.name.replace(/\s/g, '')}`;
                    extrasHtml += `
                    <div class="page-extra-item">
                        <span style="font-size:12px; font-weight:bold">${ex.name} (+${ex.price} Ø±ÙŠØ§Ù„)</span>
                        <div style="display:flex; align-items:center; gap:8px">
                            <button class="btn-extra" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, 1, '${item.id}')">+</button>
                            <span id="q-${exId}" style="font-weight:bold">${cart[exId]?.qty || 0}</span>
                            <button class="btn-extra" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, -1, '${item.id}')">-</button>
                        </div>
                    </div>`;
                    if(ex.hasNote) extrasHtml += `<input type="text" id="pnote-${exId}" class="note-box" style="display:${(cart[exId]?.qty > 0) ? 'block' : 'none'}" oninput="updateNote('${exId}', this.value)" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..." value="${cart[exId]?.note || ''}">`;
                });
                extrasHtml += `</div>`;
            }

            document.getElementById('pageContent').innerHTML = `
                <div class="page-slider">
                    <button class="slider-arrow arrow-left" onclick="prevImg(${item.imgs.length})"><i class="fas fa-chevron-left"></i></button>
                    ${imgsHtml}
                    <button class="slider-arrow arrow-right" onclick="nextImg(${item.imgs.length})"><i class="fas fa-chevron-right"></i></button>
                    <div class="slider-nav">${dotsHtml}</div>
                </div>
                <div class="details-section">
                    <h2 style="color:var(--main-brown); margin:0">${item.name}</h2>
                    <p style="color:var(--main-pink); font-size:14px; font-weight:bold; margin-top:10px">${item.desc}</p>
                    <span style="font-size:24px; font-weight:800; color:var(--main-pink); display:block; margin:15px 0">${item.price} Ø±ÙŠØ§Ù„</span>
                </div>
                ${extrasHtml}
                <div class="page-action-container">
                    <button class="btn-add-product" onclick="closeProductPage()">
                        <span>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø·Ù„Ø¨</span>
                        <div style="display:flex; align-items:center; gap:15px">
                            <div class="btn-main" onclick="event.stopPropagation(); changeQty('${item.id}', '${item.name}', ${item.price}, 1)" style="background:white; color:var(--main-brown); display:flex; align-items:center; justify-content:center;">+</div>
                            <span id="q-${item.id}" style="font-weight:bold; font-size:20px">${cart[item.id]?.qty || 0}</span>
                            <div class="btn-main" onclick="event.stopPropagation(); changeQty('${item.id}', '${item.name}', ${item.price}, -1)" style="background:white; color:var(--main-brown); display:flex; align-items:center; justify-content:center;">-</div>
                        </div>
                    </button>
                </div>`;
            document.getElementById('mainView').style.display = 'none';
            document.getElementById('productPage').style.display = 'block';
            window.scrollTo(0,0);
        }

        let currentImgIdx = 0;
        function nextImg(total) {
            document.getElementById(`pimg-${currentImgIdx}`).classList.remove('active');
            document.getElementById(`pdot-${currentImgIdx}`).classList.remove('active');
            currentImgIdx = (currentImgIdx + 1) % total;
            document.getElementById(`pimg-${currentImgIdx}`).classList.add('active');
            document.getElementById(`pdot-${currentImgIdx}`).classList.add('active');
        }
        function prevImg(total) {
            document.getElementById(`pimg-${currentImgIdx}`).classList.remove('active');
            document.getElementById(`pdot-${currentImgIdx}`).classList.remove('active');
            currentImgIdx = (currentImgIdx - 1 + total) % total;
            document.getElementById(`pimg-${currentImgIdx}`).classList.add('active');
            document.getElementById(`pdot-${currentImgIdx}`).classList.add('active');
        }

        function closeProductPage() {
            document.getElementById('productPage').style.display = 'none';
            document.getElementById('mainView').style.display = 'block';
            renderMenu(products);
        }

        // ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ù„Ø¶Ù…Ø§Ù† Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙˆØ±Ø§Ù‹
        function changeQty(id, name, price, delta, parentId = null) { 
            if (!cart[id]) cart[id] = { name: name, price: price, qty: 0, note: "", parentId: parentId }; 
            cart[id].qty += delta; 
            if (cart[id].qty <= 0) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ù†ØªØ¬ Ø£Ø³Ø§Ø³ÙŠØŒ Ø§Ø­Ø°Ù Ø¥Ø¶Ø§ÙØ§ØªÙ‡ Ù…Ø¹Ù‡. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¥Ø¶Ø§ÙØ©ØŒ Ø§Ø­Ø°ÙÙ‡Ø§ Ù‡ÙŠ ÙÙ‚Ø·.
                if(!parentId) { for (let key in cart) { if(cart[key].parentId === id) delete cart[key]; } }
                delete cart[id];
            }
            
            ['q-'+id, 'mq-'+id].forEach(eid => {
                const el = document.getElementById(eid);
                if(el) el.innerText = cart[id]?.qty || 0;
            });
            ['note-'+id, 'pnote-'+id].forEach(eid => {
                const el = document.getElementById(eid);
                if(el) el.style.display = (cart[id]?.qty > 0) ? 'block' : 'none';
            });
            updateCartUI();
            if(document.getElementById('reviewModal').style.display === 'block') openReview();
        }

        function updateNote(id, val) { 
            if(cart[id]) cart[id].note = val; 
            ['note-'+id, 'pnote-'+id].forEach(eid => {
                const el = document.getElementById(eid);
                if(el) el.value = val;
            });
        }
        
        // ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
        function updateCartUI() { 
            let count = 0, total = 0; 
            for (let id in cart) { 
                count += cart[id].qty; 
                total += (cart[id].qty * cart[id].price); 
            } 
            document.getElementById('cartBar').style.display = count > 0 ? 'flex' : 'none'; 
            document.getElementById('itemsCount').innerText = count; 
            document.getElementById('totalPrice').innerText = total + " Ø±ÙŠØ§Ù„"; 
        }

        function startSliders() { 
            document.querySelectorAll('.product-card').forEach(card => { 
                const imgs = card.querySelectorAll('.image-container img'); 
                if (imgs.length > 1 && !card.dataset.sliderSet) { 
                    setInterval(() => { 
                        let activeIdx = Array.from(imgs).findIndex(img => img.classList.contains('active'));
                        if(activeIdx !== -1) {
                            imgs[activeIdx].classList.remove('active'); 
                            imgs[(activeIdx + 1) % imgs.length].classList.add('active'); 
                        }
                    }, 4000); card.dataset.sliderSet = "true"; 
                } 
            }); 
        }

        function openReview() {
            const list = document.getElementById('reviewItems');
            list.innerHTML = ""; let total = 0;
            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
            for (let id in cart) {
                let item = cart[id];
                if(!item.parentId) {
                    let details = "";
                    for(let exId in cart) { 
                        if(cart[exId].parentId === id) {
                            details += `
                            <div class="cart-item-header" style="margin-right:20px; color:#d63384; font-size:12px; margin-top:5px;">
                                <span>+ ${cart[exId].name} (${cart[exId].qty}) ${cart[exId].note ? '['+cart[exId].note+']' : ''}</span>
                                <div class="cart-item-ctrl">
                                    <button class="btn-cart-qty" onclick="changeQty('${exId}', '${cart[exId].name}', ${cart[exId].price}, 1, '${id}')">+</button>
                                    <button class="btn-cart-qty" onclick="changeQty('${exId}', '${cart[exId].name}', ${cart[exId].price}, -1, '${id}')">-</button>
                                </div>
                            </div>`;
                        }
                    }
                    list.innerHTML += `
                    <div class="cart-item-row">
                        <div class="cart-item-header">
                            <b>${item.name}</b>
                            <div class="cart-item-ctrl">
                                <button class="btn-cart-qty" onclick="changeQty('${id}', '${item.name}', ${item.price}, 1)">+</button>
                                <span>${item.qty}</span>
                                <button class="btn-cart-qty" onclick="changeQty('${id}', '${item.name}', ${item.price}, -1)">-</button>
                            </div>
                        </div>
                        ${details}
                        <div style="text-align:left; font-size:12px; color:var(--main-pink); margin-top:5px; border-bottom: 1px solid #eee; padding-bottom: 5px;">Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ ÙˆÙ…Ø¬Ù…ÙˆØ¹ Ø¥Ø¶Ø§ÙØ§ØªÙ‡: ${(item.qty * item.price) + getExtrasTotal(id)} Ø±ÙŠØ§Ù„</div>
                    </div>`;
                    total += (item.qty * item.price) + getExtrasTotal(id);
                }
            }
            document.getElementById('modalTotal').innerText = total;
            document.getElementById('reviewModal').style.display = 'block';
        }

        function getExtrasTotal(parentId) {
            let total = 0;
            for(let id in cart) {
                if(cart[id].parentId === parentId) {
                    total += (cart[id].qty * cart[id].price);
                }
            }
            return total;
        }

        function closeReview() { document.getElementById('reviewModal').style.display = 'none'; }

        function sendWhatsApp() { 
            let msg = "Ø£Ù‡Ù„Ø§Ù‹ ÙƒÙˆÙƒÙŠØ² Ù…ÙŠÙ…Ø§ØŒ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ğŸª:\n\n"; 
            let grandTotal = 0; 
            for (let id in cart) { 
                let item = cart[id];
                if(!item.parentId) {
                    let itemTotal = (item.qty * item.price);
                    msg += `â€¢ *${item.name}* (${item.qty} Ø­Ø¨Ø©)\n`;
                    for(let exId in cart) { 
                        if(cart[exId].parentId === id) {
                            msg += `  - ${cart[exId].name} (${cart[exId].qty}) ${cart[exId].note ? '['+cart[exId].note+']' : ''}\n`;
                            itemTotal += (cart[exId].qty * cart[exId].price);
                        }
                    }
                    msg += `  Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„Ù„Ù…Ù†ØªØ¬: ${itemTotal} Ø±ÙŠØ§Ù„\n\n`;
                    grandTotal += itemTotal;
                }
            } 
            msg += `\nğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${grandTotal} Ø±ÙŠØ§Ù„*`; 
            window.open(`https://wa.me/966502509910?text=${encodeURIComponent(msg)}`); 
        }

        function filterMenu(cat, btn) { document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); renderMenu(cat === 'all' ? products : products.filter(p => p.cat === cat)); }
        renderMenu(products);
    </script>
</body>
</html>