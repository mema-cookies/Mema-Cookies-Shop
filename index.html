<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÉŸàŸÉŸäÿ≤ ŸÖŸäŸÖÿß | MADE WITH LOVE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --main-pink: #d63384; 
            --soft-pink: #f8d7da; 
            --main-brown: #795548; 
            --card-bg: #ffffff; 
        }

        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            margin: 0; 
            background-color: var(--soft-pink); 
            padding-bottom: 180px; 
            -webkit-tap-highlight-color: transparent;
        }

        header { background-color: var(--soft-pink); background-image: url('logo.jpg'); background-size: contain; background-position: center top; background-repeat: no-repeat; width: 100%; height: 260px; border-bottom: 3px solid var(--main-pink); }
        
        .marquee-container { background-color: var(--main-pink); color: white; overflow: hidden; padding: 12px 0; font-size: 14px; font-weight: bold; position: sticky; top: 0; z-index: 1001; text-align: center; }
        .marquee-text { display: inline-block; white-space: nowrap; animation: bounce-slide 10s ease-in-out infinite; }
        @keyframes bounce-slide { 0%, 100% { transform: translateX(-5%); } 50% { transform: translateX(5%); } }

        .instagram-float { position: fixed; top: 70px; left: 20px; background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; z-index: 2001; box-shadow: 0 4px 10px rgba(0,0,0,0.2); text-decoration: none; transition: transform 0.2s; }
        .instagram-float:active { transform: scale(1.2); }
        
        .whatsapp-float { position: fixed; top: 130px; left: 20px; background-color: #25d366; color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 26px; z-index: 2001; box-shadow: 0 4px 10px rgba(0,0,0,0.2); text-decoration: none; transition: transform 0.2s; }
        .whatsapp-float:active { transform: scale(1.2); }

        .categories-nav { position: sticky; top: 43px; background: #fff; padding: 12px; display: flex; gap: 10px; overflow-x: auto; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); scrollbar-width: none; }
        .cat-btn { border: 2px solid var(--main-pink); background: transparent; color: var(--main-pink); padding: 8px 20px; border-radius: 25px; white-space: nowrap; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .cat-btn.active { background: var(--main-pink); color: #fff; transform: scale(1.05); }
        
        .section-title { background: var(--main-brown); color: white; padding: 8px 20px; margin: 25px 15px 10px; border-radius: 8px; display: inline-block; font-size: 15px; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        
        .product-card { background: var(--card-bg); border-radius: 20px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); display: flex; flex-direction: column; border: 1px solid #fce4ec; transition: 0.3s; }
        .image-container { width: 100%; height: 150px; overflow: hidden; position: relative; background: #f9f9f9; cursor: pointer; }
        .image-container img { width: 100%; height: 100%; object-fit: cover; position: absolute; opacity:0; transition: opacity 0.5s ease; }
        .image-container img.active { opacity: 1; }
        
        .product-info { padding: 10px; text-align: center; cursor: pointer; }
        .product-info h3 { margin: 0 0 5px 0; font-size: 13px; color: var(--main-brown); font-weight: bold; }
        .product-desc { font-size: 10px; color: #d63384; margin-bottom: 5px; font-weight: bold; line-height: 1.3; }
        .price-text { color: var(--main-pink); font-weight: 800; font-size: 14px; display: block; margin-bottom: 5px; }

        .extras-container { background: #fff9fa; padding: 8px; border-top: 1px dashed #ffd1dc; display: flex; flex-direction: column; gap: 8px; }
        .extra-interactive-item { background: white; border: 1px solid #eee; border-radius: 12px; padding: 8px; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; }
        .extra-interactive-item.selected { border-color: var(--main-pink); background: #fff0f3; box-shadow: 0 2px 5px rgba(214, 51, 132, 0.1); }
        .extra-name { font-size: 10px; color: #444; font-weight: bold; }
        .extra-ctrl { display: flex; align-items: center; gap: 6px; }
        .btn-extra { background: var(--main-pink); color: white; border: none; width: 24px; height: 24px; border-radius: 6px; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .extra-qty { font-size: 12px; min-width: 12px; text-align: center; font-weight: bold; color: var(--main-pink); }
        
        .note-box { width: 90%; margin: 5px auto; padding: 8px; border: 1px solid #ffd1dc; border-radius: 8px; font-size: 10px; box-sizing: border-box; display: block; text-align: center; outline: none; transition: 0.3s; }
        .note-box:focus { border-color: var(--main-pink); box-shadow: 0 0 5px rgba(214, 51, 132, 0.2); }

        .main-controls { display: flex; align-items: center; justify-content: space-around; padding: 12px; background: #fdfdfd; border-top: 1px solid #eee; margin-top: auto; }
        .btn-main { background: var(--main-brown); color: white; border: none; width: 35px; height: 35px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 20px; transition: transform 0.1s; }
        .btn-main:active { transform: scale(0.9); }
        .main-qty { font-weight: 800; color: var(--main-brown); font-size: 18px; }

        #productPage { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 3000; overflow-y: auto; padding-bottom: 220px; animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        
        .back-nav { padding: 15px; background: white; position: sticky; top: 0; display: flex; align-items: center; gap: 10px; z-index: 10; border-bottom: 1px solid #eee; }
        .btn-back { background: var(--soft-pink); border: none; padding: 10px 15px; border-radius: 12px; color: var(--main-pink); font-weight: bold; cursor: pointer; }
        
        .page-slider { width: 100%; height: 350px; position: relative; background: #fdfdfd; overflow: hidden; }
        .page-slider img { width: 100%; height: 100%; object-fit: contain; position: absolute; opacity: 0; transition: 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .page-slider img.active { opacity: 1; }
        
        .slider-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.7); color: var(--main-pink); border: none; width: 45px; height: 45px; border-radius: 50%; font-size: 20px; z-index: 5; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .arrow-left { left: 15px; } .arrow-right { right: 15px; }

        .cart-fixed-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--main-pink); color: white; padding: 22px 0; display: none; justify-content: center; align-items: center; z-index: 4000; box-shadow: 0 -5px 20px rgba(214, 51, 132, 0.3); border-radius: 30px 30px 0 0; cursor: pointer; transition: 0.3s; }
        .cart-fixed-bar:active { transform: scale(0.98); }

        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 5000; overflow-y: auto; backdrop-filter: blur(5px); }
        .modal-body { background: white; width: 92%; max-width: 450px; margin: 30px auto; border-radius: 25px; padding: 25px; direction: rtl; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        
        .cart-item-row { background: #fff; border: 1px solid #f0f0f0; border-radius: 15px; padding: 15px; margin-bottom: 12px; }
        .cart-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .extra-row-invoice { background: #fef1f4; border-right: 3px solid var(--main-pink); margin: 5px 0; padding: 8px 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        
        .page-extras { background: #fffcfd; border-radius: 15px; padding: 15px; border: 1px solid #fce4ec; margin: 20px; text-align: right; }
        .page-action-container { padding: 0 20px; margin-bottom: 50px; }
        .btn-add-product { background: var(--main-brown); color: white; padding: 18px 25px; border-radius: 15px; display: flex; justify-content: space-between; align-items: center; width: 100%; border: none; font-size: 16px; font-family: inherit; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .btn-cart-qty { background: #eee; border: none; width: 28px; height: 28px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        
        /* ÿ≤ÿ± ÿßŸÑÿπŸàÿØÿ© ÿßŸÑŸàÿ±ÿØŸä ÿßŸÑÿµÿ∫Ÿäÿ± ŸÅŸä ÿßŸÑÿ≥ŸÑÿ© */
        .btn-back-cart { position: absolute; top: 20px; right: 20px; background: var(--soft-pink); border: none; padding: 6px 12px; border-radius: 10px; color: var(--main-pink); font-size: 11px; font-weight: bold; cursor: pointer; z-index: 10; }
    </style>
</head>
<body>

    <div id="mainView">
        <div class="marquee-container">
            <div class="marquee-text">üì¢ ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿ∑ŸÑÿ®: ÿßŸÑÿ∑ŸÑÿ® ŸÇÿ®ŸÑ ÿ®ŸäŸàŸÖ ÿßŸà ŸäŸàŸÖŸäŸÜ - ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÑŸÉŸÖŸäÿßÿ™ ÿßŸÑÿ®ÿ≥Ÿäÿ∑ÿ© ÿ®ŸÜŸÅÿ≥ ÿßŸÑŸäŸàŸÖ üì¢</div>
        </div>
        <a href="https://www.instagram.com/cookies_mema70/" class="instagram-float" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://wa.me/966502509910" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <header></header>
        <nav class="categories-nav">
            <button class="cat-btn active" onclick="filterMenu('all', this)">ÿßŸÑŸÉŸÑ</button>
            <button class="cat-btn" onclick="filterMenu('cookies', this)">ŸÉŸàŸÉŸäÿ≤</button>
            <button class="cat-btn" onclick="filterMenu('pudding', this)">ÿ®ŸàÿØŸäŸÜŸÇ</button>
            <button class="cat-btn" onclick="filterMenu('cakes', this)">ŸÉŸäŸÉÿßÿ™</button>
            <button class="cat-btn" onclick="filterMenu('boxes', this)">ÿ®ŸàŸÉÿ≥ÿßÿ™</button>
        </nav>
        <div id="menuContent"></div>
        <div style="text-align: center; padding: 40px 0; color: var(--main-brown); font-weight: bold; font-size: 18px;">ŸäŸèÿµŸÜÿπ ÿ®ŸÉŸÑ ÿ≠Ÿèÿ® | MADE WITH LOVEüíï</div>
    </div>

    <div id="productPage">
        <div class="back-nav">
            <button class="btn-back" onclick="closeProductPage()"><i class="fas fa-arrow-right"></i> ÿßŸÑÿπŸàÿØÿ©</button>
            <span id="pageHeaderTitle" style="font-weight:bold; color:var(--main-brown)"></span>
        </div>
        <div id="pageContent"></div>
    </div>

    <div id="cartBar" class="cart-fixed-bar" onclick="openReview()">
        <div class="cart-content-wrapper">
            <span>üõí ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ™ŸÅÿßÿµŸäŸÑ ÿ∑ŸÑÿ®ŸÉ üç™ (<span id="itemsCount">0</span>)</span>
            <span id="totalPrice" style="margin-right:20px; background:rgba(255,255,255,0.2); padding:5px 15px; border-radius:15px;">0 ÿ±ŸäÿßŸÑ</span>
        </div>
    </div>

    <div id="reviewModal" class="modal-overlay">
        <div class="modal-body">
            <button class="btn-back-cart" onclick="closeReview()"><i class="fas fa-arrow-right"></i> ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÖÿ™ÿ¨ÿ±</button>
            
            <h3 style="text-align:center; color:var(--main-pink); margin-top:35px; margin-bottom:20px;">üç™ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ∑ŸÑÿ®ŸÉ üç™</h3>
            <div id="reviewItems"></div>
            <div style="text-align:center; font-weight:800; margin:20px 0; font-size:22px; color:var(--main-brown);">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: <span id="modalTotal" style="color:var(--main-pink)">0</span> ÿ±ŸäÿßŸÑ</div>
            <button onclick="sendWhatsApp()" style="background: #25d366; color: white; border: none; width: 100%; padding: 18px; border-radius: 15px; font-weight: bold; font-size: 18px; cursor: pointer; box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);"><i class="fab fa-whatsapp"></i> ÿ•ÿ±ÿ≥ÿßŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®</button>
            <button onclick="closeReview()" style="background: #f0f0f0; width: 100%; padding: 12px; border: none; border-radius: 15px; margin-top: 15px; cursor: pointer; font-weight: bold; color: #666;">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÖÿ™ÿ¨ÿ±</button>
        </div>
    </div>

    <script>
        const products = [
            { id: "c1", name: "ŸÉŸàŸÉŸäÿ≤ ŸÖŸäŸÖÿß", cat: "cookies", price: 5, desc: "(ÿ∑ÿ±ÿßŸàÿ© ŸàŸÑÿ∞ÿ© - ÿ®ÿ¥ŸàŸÉŸÑÿ™ ÿ®ŸÑÿ¨ŸäŸÉŸä ŸÅÿßÿÆÿ±)", imgs: ["3.jpg", "51.jpg", "52.jpg", "53.jpg"] },
            { id: "c2", name: "ÿ®ÿßŸäÿ™ÿ≥ ŸÉŸàŸÉŸäÿ≤", cat: "cookies", price: 1, desc: "(ÿµÿ∫Ÿäÿ±ÿ© ÿ®ÿßŸÑÿ≠ÿ¨ŸÖ - ŸÉÿ®Ÿäÿ±Ÿá ÿ®ÿßŸÑÿ∑ÿπŸÖ ÿ™ÿ∞Ÿàÿ® Ÿàÿ™ÿÆŸÑŸäŸÉ ÿ™ÿ®ÿ™ÿ≥ŸÖ)", imgs: ["8.jpg", "56.jpg", "57.jpg", "58.jpg", "59.jpg", "60.jpg"], extras: [{ name: "ÿµŸàÿµ ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 2 }, { name: "ÿµŸàÿµ ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿµŸàÿµ ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿµŸàÿµ ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }] },
            { id: "c3", name: "ŸÉŸàŸÉŸäÿ≤ ÿ≠ÿ≥ÿßŸàŸä", cat: "cookies", price: 6, desc: "(ŸÜŸÉŸáÿ© ÿ™ÿ±ÿßÿ´Ÿäÿ© - ÿ®ŸÑŸÖÿ≥ÿ© ÿπÿµÿ±Ÿäÿ©)", imgs: ["9.jpg", "40.jpg", "41.jpg", "42.jpg", "43.jpg", "44.jpg"] },
            { id: "c4", name: "ÿ≥ŸÉŸàÿ® ŸÉŸàŸÉŸäÿ≤", cat: "cookies", price: 23, desc: "(ÿ≥ŸÉŸàÿ® ŸÉŸàŸÉŸäÿ≤ ŸÖÿπ ÿßŸÑŸÅŸäŸàÿ™ŸÜ ŸàÿßŸÑŸÇÿ±ŸÖÿ¥Ÿá ŸàÿßŸÑÿ¥ŸàŸÉŸÑÿßÿ™ÿ© .. ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÑÿ∞Ÿäÿ∞ÿ© ŸÖÿß ÿ™ŸèŸÜÿ≥Ÿâ!)", imgs: ["22.jpg", "73.jpg"], extras: [{name:"ÿ≤ŸäÿßÿØÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price:2}, {name:"ÿ≤ŸäÿßÿØÿ© ŸÅŸäŸàÿ™ŸäŸÜ", price:2}] },
            { id: "c5", name: "ÿ≥ŸÉŸàÿ® ŸÉŸàŸÉŸäÿ≤ ŸÖŸäŸÖÿß Ÿàÿ≥ÿ∑", cat: "cookies", price: 33, desc: "(ÿ≥ŸÉŸàÿ® ŸÉŸàŸÉŸäÿ≤ ŸÖÿπ ÿßŸÑŸÅŸäŸàÿ™ŸÜ ŸàÿßŸÑŸÇÿ±ŸÖÿ¥Ÿá ŸàÿßŸÑÿ¥ŸàŸÉŸÑÿßÿ™ÿ© .. ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÑÿ∞Ÿäÿ∞ÿ© ŸÖÿß ÿ™ŸèŸÜÿ≥Ÿâ!)", imgs: ["73.jpg"], extras: [{name:"ÿ≤ŸäÿßÿØÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price:2}, {name:"ÿ≤ŸäÿßÿØÿ© ŸÅŸäŸàÿ™ŸäŸÜ", price:2}] },
            { id: "p1", name: "ÿ®ŸàÿØŸäŸÜŸÇ ŸÖŸäŸÖÿß ŸÖŸäŸÜŸä", cat: "pudding", price: 10, desc: "(ÿ∑ÿ®ŸÇÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤ ŸàÿßŸÑŸÅŸäŸàÿ™ŸÜ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥ ŸàÿßŸÑÿ¥ŸàŸÉŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©)", imgs: ["5.jpg", "72.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }, { name: "ŸÖÿßÿ±ÿ¥ŸÖŸäŸÑŸà", price: 2 }] },
            { id: "p2", name: "ÿ®ŸàÿØŸäŸÜŸÇ ŸÖŸäŸÖÿß Ÿàÿ≥ÿ∑", cat: "pudding", price: 20, desc: "(ÿ∑ÿ®ŸÇÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤ ŸàÿßŸÑŸÅŸäŸàÿ™ŸÜ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥ ŸàÿßŸÑÿ¥ŸàŸÉŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©)", imgs: ["4.jpg", "70.jpg", "71.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }, { name: "ŸÖÿßÿ±ÿ¥ŸÖŸäŸÑŸà", price: 2 }] },
            { id: "p3", name: "ÿ®ŸàÿØŸäŸÜŸÇ ŸÖŸäŸÖÿß ŸÉÿ®Ÿäÿ±", cat: "pudding", price: 30, desc: "(ÿ∑ÿ®ŸÇÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤ ŸàÿßŸÑŸÅŸäŸàÿ™ŸÜ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥ ŸàÿßŸÑÿ¥ŸàŸÉŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©)", imgs: ["6.jpg", "66.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }, { name: "ŸÖÿßÿ±ÿ¥ŸÖŸäŸÑŸà", price: 2 }] },
            { id: "p4", name: "ÿ®ŸàÿØŸäŸÜŸÇ ŸÖŸÉÿ≥ ŸÖŸäŸÜŸä", cat: "pudding", price: 11, desc: "(ŸÖŸÉÿ≥ ÿßŸÑŸÉŸäŸÉ ŸàÿßŸÑŸÉŸàŸÉŸäÿ≤ !! ÿ∑ÿ®ŸÇÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤ ŸàÿßŸÑŸÉŸäŸÉ ŸàÿßŸÑŸÅŸäŸàÿ™ŸÜ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥ ŸàÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©)", imgs: ["13.jpg", "45.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }, { name: "ŸÖÿßÿ±ÿ¥ŸÖŸäŸÑŸà", price: 2 }] },
            { id: "p5", name: "ÿ®ŸàÿØŸäŸÜŸÇ ŸÖŸÉÿ≥ ÿµÿ∫Ÿäÿ±", cat: "pudding", price: 19, desc: "(ŸÖŸÉÿ≥ ÿßŸÑŸÉŸäŸÉ ŸàÿßŸÑŸÉŸàŸÉŸäÿ≤ !! ÿ∑ÿ®ŸÇÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤ ŸàÿßŸÑŸÉŸäŸÉ ŸàÿßŸÑŸÅŸäŸàÿ™ŸÜ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥ ŸàÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©)", imgs: ["21.jpg", "48.jpg", "49.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }, { name: "ŸÖÿßÿ±ÿ¥ŸÖŸäŸÑŸà", price: 2 }] },
            { id: "p6", name: "ÿ®ŸàÿØŸäŸÜŸÇ ŸÖŸÉÿ≥ Ÿàÿ≥ÿ∑", cat: "pudding", price: 21, desc: "(ŸÖŸÉÿ≥ ÿßŸÑŸÉŸäŸÉ ŸàÿßŸÑŸÉŸàŸÉŸäÿ≤ !! ÿ∑ÿ®ŸÇÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤ ŸàÿßŸÑŸÉŸäŸÉ ŸàÿßŸÑŸÅŸäŸàÿ™ŸÜ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥ ŸàÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ÿßŸÑŸÅÿßÿÆÿ±ÿ©)", imgs: ["12.jpg", "46.jpg", "47.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 2 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 2 }, { name: "ŸÖÿßÿ±ÿ¥ŸÖŸäŸÑŸà", price: 2 }] },
            { id: "k1", name: "ŸÉŸäŸÉÿ© 5 ÿßŸÜÿ¥ (ÿØÿßÿ¶ÿ±Ÿäÿ©)", cat: "cakes", price: 40, desc: "(ŸÉŸäŸÉÿßÿ™ ŸÖÿ≠ÿ¥ŸäŸá ŸàŸÖÿ∫ÿ∑ÿßÿ© ÿ®ÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸä - ŸÖÿ™ÿπÿ© ŸÑŸÉŸÑ ŸÑŸÇŸÖÿ©)", imgs: ["7.jpg", "19.jpg", "23.jpg", "24.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 4 }, { name: "ŸÉÿ™ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑŸÉŸäŸÉ", price: 5, hasNote: true }, { name: "ÿ¥ŸÖÿπÿ©", price: 1 }] },
            { id: "k2", name: "ŸÉŸäŸÉÿ© 8 ÿßŸÜÿ¥ (ÿØÿßÿ¶ÿ±Ÿäÿ©)", cat: "cakes", price: 85, desc: "(ŸÉŸäŸÉÿßÿ™ ŸÖÿ≠ÿ¥ŸäŸá ŸàŸÖÿ∫ÿ∑ÿßÿ© ÿ®ÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸä - ŸÖÿ™ÿπÿ© ŸÑŸÉŸÑ ŸÑŸÇŸÖÿ©)", imgs: ["1.jpg", "15.jpg", "61.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 4 }, { name: "ŸÉÿ™ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑŸÉŸäŸÉ", price: 5, hasNote: true }, { name: "ÿ¥ŸÖÿπÿ©", price: 1 }] },
            { id: "k3", name: "ŸÉŸäŸÉÿ© 5 ÿßŸÜÿ¥ (ŸÇŸÑÿ®)", cat: "cakes", price: 45, desc: "(ŸÉŸäŸÉÿßÿ™ ŸÖÿ≠ÿ¥ŸäŸá ŸàŸÖÿ∫ÿ∑ÿßÿ© ÿ®ÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸä - ŸÖÿ™ÿπÿ© ŸÑŸÉŸÑ ŸÑŸÇŸÖÿ©)", imgs: ["10.jpg", "29.jpg", "30.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 4 }, { name: "ŸÉÿ™ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑŸÉŸäŸÉ", price: 5, hasNote: true }, { name: "ÿ¥ŸÖÿπÿ©", price: 1 }] },
            { id: "k4", name: "ŸÉŸäŸÉÿ© 10 ÿßŸÜÿ¥ (ŸÇŸÑÿ®)", cat: "cakes", price: 120, desc: "(ŸÉŸäŸÉÿßÿ™ ŸÖÿ≠ÿ¥ŸäŸá ŸàŸÖÿ∫ÿ∑ÿßÿ© ÿ®ÿßŸÑÿ¥ŸàŸÉŸàŸÑÿßÿ™Ÿá ÿßŸÑÿ®ŸÑÿ¨ŸäŸÉŸä - ŸÖÿ™ÿπÿ© ŸÑŸÉŸÑ ŸÑŸÇŸÖÿ©)", imgs: ["2.jpg", "67.jpg"], extras: [{ name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ©", price: 0 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÅÿ≥ÿ™ŸÇ", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ŸÉŸäŸÜÿØÿ±", price: 4 }, { name: "ÿßÿ∂ÿßŸÅÿ© ÿ¥ŸàŸÉŸÑÿßÿ™ÿ© ÿ®Ÿäÿ∂ÿßÿ°", price: 4 }, { name: "ŸÉÿ™ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑŸÉŸäŸÉ", price: 5, hasNote: true }, { name: "ÿ¥ŸÖÿπÿ©", price: 1 }] },
            { id: "b1", name: "ÿ®ŸàŸÉÿ≥ ÿØŸàŸÜÿßÿ™ ŸÉŸàŸÉŸäÿ≤ (6 ÿ≠ÿ®ÿßÿ™)", cat: "boxes", price: 38, desc: "(ŸÉŸàŸÉŸäÿ≤ ÿ®ÿ∑ÿßÿ®ÿπ ÿßŸÑÿØŸàŸÜÿßÿ™ - ŸÑÿ∞ÿ© ŸÖÿ≤ÿØŸàÿ¨ÿ©)", imgs: ["11.jpg", "18.jpg"] },
            { id: "b2", name: "ÿ®ŸàŸÉÿ≥ ÿØŸàŸÜÿßÿ™ ŸÉŸàŸÉŸäÿ≤ (12 ÿ≠ÿ®ÿ©)", cat: "boxes", price: 76, desc: "(ŸÉŸàŸÉŸäÿ≤ ÿ®ÿ∑ÿßÿ®ÿπ ÿßŸÑÿØŸàŸÜÿßÿ™ - ŸÑÿ∞ÿ© ŸÖÿ≤ÿØŸàÿ¨ÿ©)", imgs: ["18.jpg", "55.jpg"] },
            { id: "b1-diy", name: "ÿ®ŸàŸÉÿ≥ ÿØŸàŸÜÿßÿ™ ÿßÿµŸÜÿπŸáÿß ÿ®ŸÜŸÅÿ≥ŸÉ (6 ÿ≠ÿ®ÿßÿ™)", cat: "boxes", price: 38, desc: "(ŸÉŸÑ ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿ®ŸäÿØŸÉ ŸàÿßŸÑÿßÿ®ÿØÿßÿπ ÿπŸÑŸäŸÉ)", imgs: ["11.jpg", "54.jpg"], extras: [{ name: "ÿ≤ŸäÿßÿØÿ© ŸÅÿ≥ÿ™ŸÇ", price: 4 }, { name: "ÿ≤ŸäÿßÿØÿ© ŸÉŸäŸÜÿØÿ±", price: 4 }, { name: "ÿ≤ŸäÿßÿØÿ© ÿ≥ÿ®ÿ±ŸÜŸÉŸÑÿ≤", price: 1 }, { name: "ÿ≤ŸäÿßÿØÿ© ÿØŸàŸÜÿßÿ™ ŸÉŸàŸÉŸäÿ≤", price: 5 }] },
            { id: "b2-diy", name: "ÿ®ŸàŸÉÿ≥ ÿØŸàŸÜÿßÿ™ ÿßÿµŸÜÿπŸáÿß ÿ®ŸÜŸÅÿ≥ŸÉ (12 ÿ≠ÿ®ÿ©)", cat: "boxes", price: 76, desc: "(ŸÉŸÑ ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿ®ŸäÿØŸÉ ŸàÿßŸÑÿßÿ®ÿØÿßÿπ ÿπŸÑŸäŸÉ)", imgs: ["18.jpg", "55.jpg"], extras: [{ name: "ÿ≤ŸäÿßÿØÿ© ŸÅÿ≥ÿ™ŸÇ", price: 4 }, { name: "ÿ≤ŸäÿßÿØÿ© ŸÉŸäŸÜÿØÿ±", price: 4 }, { name: "ÿ≤ŸäÿßÿØÿ© ÿ≥ÿ®ÿ±ŸÜŸÉŸÑÿ≤", price: 1 }, { name: "ÿ≤ŸäÿßÿØÿ© ÿØŸàŸÜÿßÿ™ ŸÉŸàŸÉŸäÿ≤", price: 5 }] },
            { id: "b3", name: "ÿ®ŸàŸÉÿ≥ ÿßŸÑŸÖÿ±ÿ≠ (5 ÿ≠ÿ®ÿßÿ™)", cat: "boxes", price: 55, desc: "(ŸÉŸÑ ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿ®ŸäÿØŸÉ ŸàÿßŸÑÿßÿ®ÿØÿßÿπ ÿπŸÑŸäŸÉ)", imgs: ["20.jpg"], extras: [{name:"ÿ≤ŸäÿßÿØÿ© ŸÉÿ±ŸäŸÖÿ©", price:5}, {name:"ÿ≤ŸäÿßÿØÿ© ŸÉŸàŸÉŸäÿ≤", price:6}, {name:"ÿ≤ŸäÿßÿØÿ© ÿ≥ÿ®ÿ±ŸÜŸÉŸÑÿ≤", price:1}] },
            { id: "b4", name: "ÿ®ŸàŸÉÿ≥ ÿßŸÑŸÖÿ±ÿ≠ (8 ÿ≠ÿ®ÿßÿ™)", cat: "boxes", price: 88, desc: "(ŸÉŸÑ ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿ®ŸäÿØŸÉ ŸàÿßŸÑÿßÿ®ÿØÿßÿπ ÿπŸÑŸäŸÉ)", imgs: ["20.jpg"], extras: [{name:"ÿ≤ŸäÿßÿØÿ© ŸÉÿ±ŸäŸÖÿ©", price:5}, {name:"ÿ≤ŸäÿßÿØÿ© ŸÉŸàŸÉŸäÿ≤", price:6}, {name:"ÿ≤ŸäÿßÿØÿ© ÿ≥ÿ®ÿ±ŸÜŸÉŸÑÿ≤", price:1}] }
        ];

        let cart = {};

        function renderMenu(items) {
            const container = document.getElementById('menuContent');
            container.innerHTML = "";
            const cats = { cookies: "ÿßŸÑŸÉŸàŸÉŸäÿ≤", pudding: "ÿßŸÑÿ®ŸàÿØŸäŸÜŸÇ", cakes: "ÿßŸÑŸÉŸäŸÉÿßÿ™", boxes: "ÿßŸÑÿ®ŸàŸÉÿ≥ÿßÿ™" };
            for (let key in cats) {
                const filtered = items.filter(i => i.cat === key);
                if (filtered.length > 0) {
                    container.innerHTML += `<div class="section-title">${cats[key]}</div>`;
                    let grid = '<div class="menu-grid">';
                    filtered.forEach(item => {
                        let imgsHtml = item.imgs.map((img, idx) => `<img src="${img}" class="${idx===0?'active':''}">`).join('');
                        let extrasHtml = '';
                        if (item.extras) {
                            extrasHtml = `<div class="extras-container">`;
                            item.extras.forEach(ex => {
                                const exId = `ex_${item.id}_${ex.name.replace(/\s/g, '')}`;
                                const isSelected = cart[exId]?.qty > 0;
                                extrasHtml += `
                                <div class="extra-interactive-item ${isSelected ? 'selected' : ''}" id="card-${exId}">
                                    <span class="extra-name">${ex.name} (+${ex.price})</span>
                                    <div class="extra-ctrl">
                                        <button class="btn-extra" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, 1, '${item.id}')">+</button>
                                        <span class="extra-qty" id="mq-${exId}">${cart[exId]?.qty || 0}</span>
                                        <button class="btn-extra" style="background:#ddd; color:#666" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, -1, '${item.id}')">-</button>
                                    </div>
                                </div>`;
                                if(ex.hasNote) extrasHtml += `<input type="text" id="note-${exId}" class="note-box" style="display:${(cart[exId]?.qty > 0) ? 'block' : 'none'}" oninput="updateNote('${exId}', this.value)" placeholder="ÿßŸÉÿ™ÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿ™ŸÉ ŸáŸÜÿß..." value="${cart[exId]?.note || ''}">`;
                            });
                            extrasHtml += `</div>`;
                        }
                        grid += `
                        <div class="product-card">
                            <div class="image-container" onclick="openProductPage('${item.id}')">${imgsHtml}</div>
                            <div class="product-info" onclick="openProductPage('${item.id}')">
                                <h3>${item.name}</h3>
                                <div class="product-desc">${item.desc}</div>
                                <span class="price-text">${item.price} ÿ±ŸäÿßŸÑ</span>
                            </div>
                            ${extrasHtml}
                            <div class="main-controls">
                                <button class="btn-main" onclick="changeQty('${item.id}', '${item.name}', ${item.price}, 1)">+</button>
                                <span class="main-qty" id="mq-${item.id}">${cart[item.id]?.qty || 0}</span>
                                <button class="btn-main" style="background:#eee; color:#333" onclick="changeQty('${item.id}', '${item.name}', ${item.price}, -1)">-</button>
                            </div>
                        </div>`;
                    });
                    container.innerHTML += grid + '</div>';
                }
            }
            startSliders();
        }

        function openProductPage(productId) {
            const item = products.find(p => p.id === productId);
            document.getElementById('pageHeaderTitle').innerText = item.name;
            let imgsHtml = item.imgs.map((img, idx) => `<img src="${img}" class="${idx===0?'active':''}" id="pimg-${idx}">`).join('');
            let dotsHtml = item.imgs.map((_, idx) => `<div class="dot ${idx===0?'active':''}" id="pdot-${idx}"></div>`).join('');
            
            let extrasHtml = '';
            if (item.extras) {
                extrasHtml = `<div class="page-extras"><h3 style="font-size:16px; color:var(--main-brown); margin-bottom:15px;">ÿßŸÑÿßÿ∂ÿßŸÅÿßÿ™</h3>`;
                item.extras.forEach(ex => {
                    const exId = `ex_${item.id}_${ex.name.replace(/\s/g, '')}`;
                    extrasHtml += `
                    <div class="extra-interactive-item ${cart[exId]?.qty > 0 ? 'selected' : ''}" style="margin-bottom:10px; padding:12px;">
                        <span style="font-size:13px; font-weight:bold">${ex.name} (+${ex.price} ÿ±ŸäÿßŸÑ)</span>
                        <div style="display:flex; align-items:center; gap:10px">
                            <button class="btn-extra" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, 1, '${item.id}')">+</button>
                            <span id="q-${exId}" style="font-weight:bold; color:var(--main-pink)">${cart[exId]?.qty || 0}</span>
                            <button class="btn-extra" style="background:#ddd; color:#666" onclick="changeQty('${exId}', '${ex.name}', ${ex.price}, -1, '${item.id}')">-</button>
                        </div>
                    </div>`;
                    if(ex.hasNote) extrasHtml += `<input type="text" id="pnote-${exId}" class="note-box" style="display:${(cart[exId]?.qty > 0) ? 'block' : 'none'}" oninput="updateNote('${exId}', this.value)" placeholder="ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©..." value="${cart[exId]?.note || ''}">`;
                });
                extrasHtml += `</div>`;
            }

            document.getElementById('pageContent').innerHTML = `
                <div class="page-slider">
                    <button class="slider-arrow arrow-left" onclick="prevImg(${item.imgs.length})"><i class="fas fa-chevron-right"></i></button>
                    ${imgsHtml}
                    <button class="slider-arrow arrow-right" onclick="nextImg(${item.imgs.length})"><i class="fas fa-chevron-left"></i></button>
                    <div class="slider-nav">${dotsHtml}</div>
                </div>
                <div class="details-section" style="padding:20px; text-align:center">
                    <h2 style="color:var(--main-brown); margin:0; font-size:22px;">${item.name}</h2>
                    <p style="color:var(--main-pink); font-size:14px; font-weight:bold; margin:10px 0">${item.desc}</p>
                    <span style="font-size:28px; font-weight:900; color:var(--main-pink);">${item.price} ÿ±ŸäÿßŸÑ</span>
                </div>
                ${extrasHtml}
                <div class="page-action-container">
                    <button class="btn-add-product">
                        <span>ÿ£ÿ∂ŸÅ ŸÑŸÑÿ∑ŸÑÿ®</span>
                        <div style="display:flex; align-items:center; gap:20px">
                            <div class="btn-main" onclick="event.stopPropagation(); changeQty('${item.id}', '${item.name}', ${item.price}, 1)" style="background:white; color:var(--main-brown);">+</div >
                            <span id="q-${item.id}" style="font-weight:800; font-size:24px">${cart[item.id]?.qty || 0}</span>
                            <div class="btn-main" onclick="event.stopPropagation(); changeQty('${item.id}', '${item.name}', ${item.price}, -1)" style="background:white; color:var(--main-brown);">-</div>
                        </div>
                    </button>
                </div>`;
            document.getElementById('mainView').style.display = 'none';
            document.getElementById('productPage').style.display = 'block';
        }

        let currentImgIdx = 0;
        function nextImg(total) {
            document.getElementById(`pimg-${currentImgIdx}`).classList.remove('active');
            currentImgIdx = (currentImgIdx + 1) % total;
            document.getElementById(`pimg-${currentImgIdx}`).classList.add('active');
        }
        function prevImg(total) {
            document.getElementById(`pimg-${currentImgIdx}`).classList.remove('active');
            currentImgIdx = (currentImgIdx - 1 + total) % total;
            document.getElementById(`pimg-${currentImgIdx}`).classList.add('active');
        }

        function closeProductPage() {
            document.getElementById('productPage').style.display = 'none';
            document.getElementById('mainView').style.display = 'block';
            renderMenu(products);
        }

        function changeQty(id, name, price, delta, parentId = null) { 
            if (!cart[id]) cart[id] = { name: name, price: price, qty: 0, note: "", parentId: parentId }; 
            cart[id].qty += delta; 
            if (cart[id].qty <= 0) {
                if(!parentId) { for (let key in cart) { if(cart[key].parentId === id) delete cart[key]; } }
                delete cart[id];
            }
            ['q-'+id, 'mq-'+id].forEach(eid => {
                const el = document.getElementById(eid);
                if(el) el.innerText = cart[id]?.qty || 0;
            });
            const card = document.getElementById('card-'+id);
            if(card) {
                if(cart[id]?.qty > 0) card.classList.add('selected');
                else card.classList.remove('selected');
            }
            ['note-'+id, 'pnote-'+id].forEach(eid => {
                const el = document.getElementById(eid);
                if(el) el.style.display = (cart[id]?.qty > 0) ? 'block' : 'none';
            });
            updateCartUI();
            if(document.getElementById('reviewModal').style.display === 'block') openReview();
        }

        function updateNote(id, val) { 
            if(cart[id]) cart[id].note = val; 
        }
        
        function updateCartUI() { 
            let count = 0, total = 0; 
            for (let id in cart) { 
                count += cart[id].qty; 
                total += (cart[id].qty * cart[id].price); 
            } 
            document.getElementById('cartBar').style.display = count > 0 ? 'flex' : 'none'; 
            document.getElementById('itemsCount').innerText = count; 
            document.getElementById('totalPrice').innerText = total + " ÿ±ŸäÿßŸÑ"; 
        }

        function startSliders() { 
            document.querySelectorAll('.product-card').forEach(card => { 
                const imgs = card.querySelectorAll('.image-container img'); 
                if (imgs.length > 1 && !card.dataset.sliderSet) { 
                    setInterval(() => { 
                        let activeIdx = Array.from(imgs).findIndex(img => img.classList.contains('active'));
                        if(activeIdx !== -1) {
                            imgs[activeIdx].classList.remove('active'); 
                            imgs[(activeIdx + 1) % imgs.length].classList.add('active'); 
                        }
                    }, 4000); card.dataset.sliderSet = "true"; 
                } 
            }); 
        }

        function openReview() {
            const list = document.getElementById('reviewItems');
            list.innerHTML = ""; let total = 0;
            for (let id in cart) {
                let item = cart[id];
                if(!item.parentId) {
                    let productBaseTotal = item.qty * item.price;
                    let extrasDetails = "";
                    let extrasTotal = 0;
                    for(let exId in cart) { 
                        if(cart[exId].parentId === id) {
                            let exCost = cart[exId].qty * cart[exId].price;
                            extrasTotal += exCost;
                            extrasDetails += `
                            <div class="extra-row-invoice">
                                <span>+ ${cart[exId].name} (${cart[exId].qty}) ${cart[exId].note ? '<br><small>üìù '+cart[exId].note+'</small>' : ''}</span>
                                <div class="cart-item-ctrl">
                                    <button class="btn-cart-qty" onclick="changeQty('${exId}', '${cart[exId].name}', ${cart[exId].price}, 1, '${id}')">+</button>
                                    <span style="font-weight:bold; margin:0 5px">${exCost} ÿ±.ÿ≥</span>
                                    <button class="btn-cart-qty" onclick="changeQty('${exId}', '${cart[exId].name}', ${cart[exId].price}, -1, '${id}')">-</button>
                                </div>
                            </div>`;
                        }
                    }
                    list.innerHTML += `
                    <div class="cart-item-row">
                        <div class="cart-item-header">
                            <b style="color:var(--main-brown); font-size:16px;">${item.name}</b>
                            <div class="cart-item-ctrl">
                                <button class="btn-cart-qty" onclick="changeQty('${id}', '${item.name}', ${item.price}, 1)">+</button>
                                <span style="font-weight:bold; width:20px; text-align:center">${item.qty}</span>
                                <button class="btn-cart-qty" onclick="changeQty('${id}', '${item.name}', ${item.price}, -1)">-</button>
                                <span style="margin-right:10px; font-weight:900; color:var(--main-pink)">${productBaseTotal} ÿ±.ÿ≥</span>
                            </div>
                        </div>
                        ${extrasDetails}
                    </div>`;
                    total += (productBaseTotal + extrasTotal);
                }
            }
            document.getElementById('modalTotal').innerText = total;
            document.getElementById('reviewModal').style.display = 'block';
        }

        function closeReview() { document.getElementById('reviewModal').style.display = 'none'; }

        function sendWhatsApp() { 
            let msg = "ÿ£ŸáŸÑÿßŸã ŸÉŸàŸÉŸäÿ≤ ŸÖŸäŸÖÿßÿå ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ üç™:\n\n"; 
            let grandTotal = 0; 
            for (let id in cart) { 
                let item = cart[id];
                if(!item.parentId) {
                    let baseTotal = item.qty * item.price;
                    msg += `*${item.name}*\n`;
                    msg += `ÿßŸÑÿπÿØÿØ: ${item.qty} | ÿßŸÑÿ≥ÿπÿ±: ${baseTotal} ÿ±ŸäÿßŸÑ\n`;
                    let extrasMsg = "";
                    let extrasTotal = 0;
                    for(let exId in cart) { 
                        if(cart[exId].parentId === id) {
                            let exCost = cart[exId].qty * cart[exId].price;
                            extrasTotal += exCost;
                            extrasMsg += `  + ${cart[exId].name} (${cart[exId].qty}) [${exCost} ÿ±ŸäÿßŸÑ] ${cart[exId].note ? '\n     ŸÖŸÑÿßÿ≠ÿ∏ÿ©: '+cart[exId].note : ''}\n`;
                        }
                    }
                    if(extrasMsg) {
                        msg += extrasMsg;
                        // ÿ™ŸÖ ÿ•ÿ≤ÿßŸÑÿ© ÿ≥ÿ∑ÿ± "ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿ•ÿ∂ÿßŸÅÿßÿ™" ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ∑ŸÑÿ®ŸÉ
                    }
                    msg += `\n`;
                    grandTotal += (baseTotal + extrasTotal);
                }
            } 
            msg += `‚ú® *ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑÿ∑ŸÑÿ®: ${grandTotal} ÿ±ŸäÿßŸÑ*`; 
            window.open(`https://wa.me/966502509910?text=${encodeURIComponent(msg)}`); 
        }

        function filterMenu(cat, btn) { document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); renderMenu(cat === 'all' ? products : products.filter(p => p.cat === cat)); }
        renderMenu(products);
    </script>
</body>
</html>